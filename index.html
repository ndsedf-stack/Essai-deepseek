<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HYBRID MASTER 51 - Ultimate Pro</title>
  <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    :root {
      --color-background: #000000;
      --color-surface: rgba(28, 28, 30, 0.8);
      --color-surface-elevated: rgba(44, 44, 46, 0.9);
      --color-accent-blue: #0A84FF;
      --color-accent-green: #30D158;
      --color-accent-cyan: #64D2FF;
      --color-text-primary: #FFFFFF;
      --color-text-secondary: #98989D;
      --glow-blue: 0 0 30px rgba(10, 132, 255, 0.6);
      --glow-green: 0 0 30px rgba(48, 209, 88, 0.6);
      --glass-border: 1px solid rgba(255, 255, 255, 0.15);
    }
    
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%);
      color: var(--color-text-primary);
      font-family: -apple-system, 'SF Pro Display', sans-serif;
      line-height: 1.5;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      padding-bottom: 90px;
    }
    
    .container {
      position: relative;
      z-index: 1;
      max-width: 100%;
      margin: 0 auto;
      padding: 16px;
    }
    
    /* Style iOS 18 avancé - Cartes avec effet verre */
    .card {
      background: rgba(28, 28, 30, 0.7);
      backdrop-filter: blur(40px) saturate(180%);
      -webkit-backdrop-filter: blur(40px) saturate(180%);
      border-radius: 22px;
      padding: 24px;
      margin-bottom: 18px;
      border: var(--glass-border);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    
    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
    }
    
    .card-elevated {
      background: rgba(44, 44, 46, 0.85);
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.6);
    }
    
    /* En-tête amélioré */
    .header {
      background: rgba(44, 44, 46, 0.8);
      backdrop-filter: blur(50px) saturate(200%);
      border-radius: 28px;
      padding: 28px;
      margin-bottom: 24px;
      border: var(--glass-border);
      box-shadow: var(--glow-blue);
      position: relative;
      overflow: hidden;
    }
    
    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--color-accent-blue), transparent);
    }
    
    .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }
    
    .app-logo {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .logo-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--color-accent-blue), var(--color-accent-green));
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
      box-shadow: var(--glow-green);
      position: relative;
      overflow: hidden;
    }
    
    .logo-icon::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.2), transparent);
      border-radius: 16px;
    }
    
    .app-title h1 {
      font-size: 28px;
      font-weight: 900;
      background: linear-gradient(135deg, var(--color-accent-blue), var(--color-accent-green));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      letter-spacing: -0.5px;
      text-shadow: 0 2px 10px rgba(10, 132, 255, 0.3);
    }
    
    .app-subtitle {
      font-size: 14px;
      color: var(--color-text-secondary);
      font-weight: 600;
      margin-top: 4px;
      letter-spacing: 0.3px;
    }
    
    .pro-badge {
      background: linear-gradient(135deg, #FF6B35, #FF8E53);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      box-shadow: 0 4px 15px rgba(255, 107, 53, 0.4);
      position: relative;
      overflow: hidden;
    }
    
    .pro-badge::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }
    
    .pro-badge:hover::before {
      left: 100%;
    }
    
    /* Onglets style iOS 18 amélioré */
    .tabs-container {
      display: flex;
      background: rgba(118, 118, 128, 0.12);
      border-radius: 16px;
      padding: 4px;
      margin-bottom: 24px;
      position: relative;
    }
    
    .tab-btn {
      flex: 1;
      padding: 12px 16px;
      background: transparent;
      border: none;
      border-radius: 12px;
      color: var(--color-text-secondary);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      z-index: 1;
    }
    
    .tab-btn.active {
      background: rgba(44, 44, 46, 0.9);
      color: var(--color-text-primary);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    
    /* Actions rapides iOS 18 amélioré */
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 14px;
      margin-bottom: 24px;
    }
    
    .action-btn {
      background: rgba(28, 28, 30, 0.7);
      backdrop-filter: blur(40px);
      border: var(--glass-border);
      border-radius: 20px;
      padding: 22px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      position: relative;
      overflow: hidden;
    }
    
    .action-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(10, 132, 255, 0.1), rgba(48, 209, 88, 0.1));
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .action-btn:hover::before {
      opacity: 1;
    }
    
    .action-btn:active {
      transform: scale(0.96);
      background: rgba(44, 44, 46, 0.8);
    }
    
    .action-icon {
      font-size: 38px;
      margin-bottom: 6px;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
      z-index: 1;
    }
    
    .action-label {
      font-size: 15px;
      font-weight: 700;
      color: var(--color-text-primary);
      z-index: 1;
    }
    
    /* Sélecteurs iOS 18 améliorés */
    .control-group {
      margin-bottom: 18px;
    }
    
    .control-label {
      font-size: 14px;
      font-weight: 700;
      color: var(--color-text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 10px;
      display: block;
    }
    
    select, input {
      width: 100%;
      background: rgba(118, 118, 128, 0.12);
      border: none;
      padding: 16px 18px;
      border-radius: 14px;
      color: var(--color-text-primary);
      font-size: 16px;
      font-weight: 600;
      font-family: inherit;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }
    
    select:focus, input:focus {
      outline: none;
      background: rgba(118, 118, 128, 0.18);
      box-shadow: 0 0 0 2px rgba(10, 132, 255, 0.5);
    }
    
    /* Boutons iOS 18 améliorés */
    .btn {
      background: linear-gradient(135deg, var(--color-accent-blue), var(--color-accent-green));
      color: white;
      border: none;
      padding: 18px 26px;
      border-radius: 16px;
      font-weight: 800;
      font-size: 17px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      width: 100%;
      box-shadow: 0 6px 20px rgba(48, 209, 88, 0.4);
      position: relative;
      overflow: hidden;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    
    .btn:hover::before {
      left: 100%;
    }
    
    .btn:active {
      transform: scale(0.96);
    }
    
    .btn-secondary {
      background: rgba(118, 118, 128, 0.24);
      color: var(--color-accent-blue);
      box-shadow: none;
    }
    
    /* Liste d'exercices iOS 18 améliorée */
    .exercise-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .exercise-card {
      background: rgba(28, 28, 30, 0.7);
      backdrop-filter: blur(40px);
      border: var(--glass-border);
      border-radius: 18px;
      padding: 18px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .exercise-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(10, 132, 255, 0.5), transparent);
    }
    
    .exercise-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }
    
    .exercise-card:active {
      transform: scale(0.98);
      background: rgba(44, 44, 46, 0.8);
    }
    
    .exercise-header {
      font-size: 18px;
      font-weight: 800;
      color: var(--color-text-primary);
      margin-bottom: 12px;
    }
    
    .exercise-stats {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    
    .stat-chip {
      background: rgba(10, 132, 255, 0.15);
      border: 1px solid rgba(10, 132, 255, 0.3);
      padding: 8px 14px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 700;
      color: var(--color-accent-blue);
      backdrop-filter: blur(10px);
    }
    
    .stat-chip.weight {
      background: rgba(48, 209, 88, 0.15);
      border-color: rgba(48, 209, 88, 0.3);
      color: var(--color-accent-green);
    }
    
    /* Graphiques améliorés */
    .chart-card {
      background: rgba(28, 28, 30, 0.7);
      backdrop-filter: blur(40px);
      border: var(--glass-border);
      border-radius: 22px;
      padding: 24px;
      margin-bottom: 18px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    
    .chart-title {
      font-size: 16px;
      font-weight: 800;
      color: var(--color-text-primary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .chart-container {
      height: 300px;
      position: relative;
    }
    
    /* Calendrier amélioré */
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      margin-top: 14px;
    }
    
    .calendar-day {
      aspect-ratio: 1;
      background: rgba(118, 118, 128, 0.12);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 700;
      color: var(--color-text-secondary);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .calendar-day.completed {
      background: linear-gradient(135deg, var(--color-accent-green), #28B446);
      color: white;
      box-shadow: 0 4px 12px rgba(48, 209, 88, 0.4);
    }
    
    .calendar-day.partial {
      background: linear-gradient(135deg, var(--color-accent-blue), #0077ED);
      color: white;
      box-shadow: 0 4px 12px rgba(10, 132, 255, 0.4);
    }
    
    /* Navigation inférieure iOS 18 améliorée */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(44, 44, 46, 0.9);
      backdrop-filter: blur(40px) saturate(180%);
      -webkit-backdrop-filter: blur(40px) saturate(180%);
      border-top: var(--glass-border);
      padding: 10px 0 28px 0;
      display: flex;
      justify-content: space-around;
      z-index: 1000;
    }
    
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      padding: 10px 18px;
      transition: all 0.3s ease;
      border-radius: 14px;
      position: relative;
    }
    
    .nav-item::after {
      content: '';
      position: absolute;
      bottom: -8px;
      width: 0;
      height: 3px;
      background: var(--color-accent-green);
      border-radius: 2px;
      transition: width 0.3s ease;
    }
    
    .nav-item.active::after {
      width: 30px;
    }
    
    .nav-item:active {
      transform: scale(0.9);
    }
    
    .nav-item.active .nav-icon {
      color: var(--color-accent-green);
      transform: translateY(-2px);
    }
    
    .nav-item.active .nav-label {
      color: var(--color-accent-green);
      font-weight: 800;
    }
    
    .nav-icon {
      font-size: 28px;
      color: var(--color-text-secondary);
      transition: all 0.3s ease;
    }
    
    .nav-label {
      font-size: 11px;
      font-weight: 700;
      color: var(--color-text-secondary);
      transition: all 0.3s ease;
    }
    
    /* Stats grid amélioré */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 14px;
      margin: 18px 0;
    }
    
    .stat-box {
      background: rgba(118, 118, 128, 0.12);
      border-radius: 16px;
      padding: 18px;
      text-align: center;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .stat-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(10, 132, 255, 0.1), rgba(48, 209, 88, 0.1));
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .stat-box:hover::before {
      opacity: 1;
    }
    
    .stat-value {
      font-size: 32px;
      font-weight: 900;
      background: linear-gradient(135deg, var(--color-accent-blue), var(--color-accent-green));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 6px;
      position: relative;
      z-index: 1;
    }
    
    .stat-label {
      font-size: 13px;
      font-weight: 700;
      color: var(--color-text-secondary);
      position: relative;
      z-index: 1;
    }
    
    .hidden {
      display: none !important;
    }
    
    /* Section titre améliorée */
    .section-title {
      font-size: 24px;
      font-weight: 900;
      color: var(--color-text-primary);
      margin-bottom: 18px;
      margin-top: 10px;
      background: linear-gradient(135deg, var(--color-accent-blue), var(--color-accent-green));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    /* Animation d'apparition des éléments */
    .fade-in {
      animation: fadeInUp 0.5s ease forwards;
      opacity: 0;
      transform: translateY(20px);
    }
    
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Mode entraînement amélioré */
    .workout-mode {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%);
      z-index: 10000;
      display: flex;
      flex-direction: column;
      padding: 20px;
      overflow-y: auto;
    }
    
    .workout-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }
    
    .workout-title {
      font-size: 28px;
      font-weight: 900;
      background: linear-gradient(135deg, var(--color-accent-blue), var(--color-accent-green));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .workout-close {
      background: rgba(118, 118, 128, 0.24);
      border: none;
      border-radius: 12px;
      padding: 12px;
      color: var(--color-text-primary);
      cursor: pointer;
      font-size: 20px;
    }
    
    .current-exercise {
      background: rgba(28, 28, 30, 0.7);
      backdrop-filter: blur(40px);
      border-radius: 20px;
      padding: 24px;
      margin-bottom: 20px;
      border: var(--glass-border);
    }
    
    .exercise-name {
      font-size: 24px;
      font-weight: 900;
      margin-bottom: 16px;
      color: var(--color-text-primary);
    }
    
    .exercise-details {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }
    
    .exercise-detail {
      background: rgba(118, 118, 128, 0.12);
      border-radius: 14px;
      padding: 16px;
      text-align: center;
    }
    
    .detail-value {
      font-size: 24px;
      font-weight: 900;
      color: var(--color-accent-blue);
      margin-bottom: 4px;
    }
    
    .detail-label {
      font-size: 12px;
      font-weight: 700;
      color: var(--color-text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .workout-controls {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }
    
    .control-btn {
      flex: 1;
      padding: 18px;
      border-radius: 16px;
      font-weight: 800;
      font-size: 16px;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .control-complete {
      background: linear-gradient(135deg, var(--color-accent-green), #28B446);
      color: white;
      box-shadow: 0 4px 16px rgba(48, 209, 88, 0.4);
    }
    
    .control-skip {
      background: rgba(118, 118, 128, 0.24);
      color: var(--color-text-primary);
    }
    
    /* Indicateurs d'intensification */
    .intensity-badge {
      background: rgba(255, 159, 10, 0.15);
      border: 1px solid rgba(255, 159, 10, 0.3);
      color: #FF9F0A;
      padding: 4px 8px;
      border-radius: 8px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-left: 8px;
    }
    
    .progression-info {
      background: rgba(10, 132, 255, 0.1);
      border-radius: 12px;
      padding: 12px;
      margin-top: 12px;
      border-left: 3px solid var(--color-accent-blue);
    }
    
    .progression-text {
      font-size: 13px;
      font-weight: 600;
      color: var(--color-accent-cyan);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .quick-actions {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .container {
        padding: 14px;
      }
      
      .card {
        padding: 20px;
        border-radius: 20px;
      }
      
      .header {
        padding: 24px;
        border-radius: 24px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- En-tête -->
    <div class="header fade-in">
      <div class="header-top">
        <div class="app-logo">
          <div class="logo-icon">💪</div>
          <div class="app-title">
            <h1>HYBRID MASTER 51</h1>
            <div class="app-subtitle">Programme Pro • 26 Semaines • Techniques d'Intensification</div>
          </div>
        </div>
        <div class="pro-badge">PRO</div>
      </div>
      
      <!-- Onglets -->
      <div class="tabs-container">
        <button class="tab-btn active" data-tab="seances">Séances</button>
        <button class="tab-btn" data-tab="stats">Stats</button>
        <button class="tab-btn" data-tab="muscles">Muscles</button>
      </div>
    </div>

    <!-- TAB: SÉANCES -->
    <div id="tab-seances" class="tab-content">
      <!-- Actions rapides -->
      <div class="quick-actions fade-in">
        <div class="action-btn" onclick="app.showHistory()">
          <div class="action-icon">📅</div>
          <div class="action-label">Historique</div>
        </div>
        <div class="action-btn" onclick="app.showProgression()">
          <div class="action-icon">📊</div>
          <div class="action-label">Progression</div>
        </div>
        <div class="action-btn" onclick="app.showIntensificationGuide()">
          <div class="action-icon">🔥</div>
          <div class="action-label">Techniques</div>
        </div>
        <div class="action-btn" onclick="app.showSettings()">
          <div class="action-icon">⚙️</div>
          <div class="action-label">Réglages</div>
        </div>
      </div>

      <!-- Contrôles -->
      <div class="card fade-in">
        <div class="control-group">
          <label class="control-label">📅 Semaine</label>
          <select id="weekSelect"></select>
        </div>
        <div class="control-group">
          <label class="control-label">🗓️ Jour d'entraînement</label>
          <select id="daySelect">
            <option value="dimanche">Dimanche - Dos + Jambes + Bras</option>
            <option value="mardi">Mardi - Pecs + Épaules + Triceps</option>
            <option value="vendredi">Vendredi - Dos + Jambes + Bras</option>
            <option value="maison">Maison - Hammer Curl</option>
          </select>
        </div>
      </div>

      <!-- Stats de la séance -->
      <div class="card fade-in">
        <div class="section-title">Aperçu de la séance</div>
        <div class="stats-grid" id="sessionStats"></div>
      </div>

      <!-- Exercices -->
      <div class="card fade-in">
        <div class="section-title">Programme du jour <span class="intensity-badge">PROGRESSION LINÉAIRE</span></div>
        <div class="exercise-list" id="exerciseList"></div>
        <button class="btn" onclick="app.startWorkout()" style="margin-top: 18px;">
          🚀 Démarrer la séance
        </button>
      </div>
    </div>

    <!-- TAB: STATS -->
    <div id="tab-stats" class="tab-content hidden">
      <!-- Graphique volume -->
      <div class="chart-card fade-in">
        <div class="chart-title">WORKOUT VOLUME</div>
        <div class="chart-container">
          <canvas id="volumeChart"></canvas>
        </div>
      </div>

      <!-- Calendrier -->
      <div class="chart-card fade-in">
        <div class="chart-title">GYM SESSIONS - HEATMAP CALENDAR</div>
        <div id="calendarDisplay"></div>
      </div>
    </div>

    <!-- TAB: MUSCLES -->
    <div id="tab-muscles" class="tab-content hidden">
      <!-- Radar -->
      <div class="chart-card fade-in">
        <div class="chart-title">INTENSITÉ RELATIVE PAR MUSCLE</div>
        <div class="chart-container" style="height: 350px;">
          <canvas id="radarChart"></canvas>
        </div>
      </div>

      <!-- Donut -->
      <div class="chart-card fade-in">
        <div class="chart-title">ANALYSE MUSCULAIRE</div>
        <div class="chart-container">
          <canvas id="donutChart"></canvas>
        </div>
      </div>

      <!-- Volume par muscle -->
      <div class="card fade-in">
        <div class="section-title">Volume Hebdomadaire</div>
        <div id="muscleVolumeList"></div>
      </div>
    </div>
  </div>

  <!-- Navigation inférieure -->
  <div class="bottom-nav">
    <div class="nav-item active" data-nav="seances">
      <div class="nav-icon">💪</div>
      <div class="nav-label">Home</div>
    </div>
    <div class="nav-item" data-nav="stats">
      <div class="nav-icon">📊</div>
      <div class="nav-label">Routines</div>
    </div>
    <div class="nav-item" data-nav="stats">
      <div class="nav-icon">📈</div>
      <div class="nav-label">Progress</div>
    </div>
    <div class="nav-item" onclick="app.showSettings()">
      <div class="nav-icon">⚙️</div>
      <div class="nav-label">Settings</div>
    </div>
  </div>

  <!-- Mode entraînement -->
  <div id="workoutMode" class="workout-mode hidden">
    <div class="workout-header">
      <div class="workout-title">Mode Entraînement</div>
      <button class="workout-close" onclick="app.exitWorkout()">✕</button>
    </div>
    
    <div class="current-exercise">
      <div class="exercise-name" id="workoutExerciseName">Exercise Name</div>
      <div class="exercise-details">
        <div class="exercise-detail">
          <div class="detail-value" id="workoutSets">0/0</div>
          <div class="detail-label">SÉRIES</div>
        </div>
        <div class="exercise-detail">
          <div class="detail-value" id="workoutReps">0</div>
          <div class="detail-label">RÉPÉTITIONS</div>
        </div>
        <div class="exercise-detail">
          <div class="detail-value" id="workoutWeight">0kg</div>
          <div class="detail-label">POIDS</div>
        </div>
        <div class="exercise-detail">
          <div class="detail-value" id="workoutRest">0s</div>
          <div class="detail-label">REPOS</div>
        </div>
      </div>
      <div class="progression-info" id="workoutProgression">
        <div class="progression-text" id="progressionText">Chargement des données de progression...</div>
      </div>
    </div>
    
    <div class="timer-container">
      <div class="timer-display" id="workoutTimer">00:00</div>
      <div class="timer-controls">
        <button class="timer-btn timer-start" id="timerStart">Démarrer</button>
        <button class="timer-btn timer-pause" id="timerPause" disabled>Pause</button>
        <button class="timer-btn timer-reset">Reset</button>
      </div>
    </div>
    
    <div class="workout-controls">
      <button class="control-btn control-complete">Série Terminée</button>
      <button class="control-btn control-skip">Passer l'exercice</button>
    </div>
  </div>

  <script>
    // Version simplifiée et robuste de l'application
    document.addEventListener('DOMContentLoaded', function() {
      const app = {
        currentWeek: 1,
        currentDay: 'dimanche',
        workoutHistory: [],
        charts: {},
        timer: null,
        timerSeconds: 0,
        timerRunning: false,
        currentExerciseIndex: 0,
        currentSet: 1,

        program: {
          dimanche: {
            title: "Dimanche - Dos + Jambes Lourdes + Bras",
            exercises: [
              { name: "Trap Bar Deadlift", sets: 5, reps: "6-8", rest: 120, startWeight: 75, increment: 5, frequency: 3, targetWeight: 120 },
              { name: "Goblet Squat", sets: 4, reps: "10", rest: 75, startWeight: 25, increment: 2.5, frequency: 2, targetWeight: 57.5 },
              { name: "Leg Press", sets: 4, reps: "10", rest: 75, startWeight: 110, increment: 10, frequency: 2, targetWeight: 240 },
              { name: "Lat Pulldown (prise large)", sets: 4, reps: "10", rest: 90, startWeight: 60, increment: 2.5, frequency: 2, targetWeight: 92.5 },
              { name: "Landmine Press", sets: 4, reps: "10", rest: 90, startWeight: 35, increment: 2.5, frequency: 2, targetWeight: 67.5 },
              { name: "Rowing Machine (prise large)", sets: 4, reps: "10", rest: 75, startWeight: 50, increment: 2.5, frequency: 2, targetWeight: 82.5 },
              { name: "Incline Curl", sets: 4, reps: "12", rest: 75, startWeight: 12, increment: 2.5, frequency: 3, targetWeight: 34.5 },
              { name: "Cable Pushdown", sets: 3, reps: "12", rest: 75, startWeight: 20, increment: 2.5, frequency: 3, targetWeight: 42.5 }
            ]
          },
          mardi: {
            title: "Mardi - Pecs + Épaules + Triceps",
            exercises: [
              { name: "Dumbbell Press", sets: 5, reps: "10", rest: 105, startWeight: 22, increment: 2.5, frequency: 3, targetWeight: 45 },
              { name: "Cable Fly (poulies moyennes)", sets: 4, reps: "12", rest: 60, startWeight: 10, increment: 2.5, frequency: 3, targetWeight: 32.5 },
              { name: "Leg Press leger", sets: 3, reps: "15", rest: 60, startWeight: 80, increment: 10, frequency: 3, targetWeight: 170 },
              { name: "Extension Triceps Corde", sets: 5, reps: "12", rest: 75, startWeight: 20, increment: 2.5, frequency: 3, targetWeight: 42.5 },
              { name: "Lateral Raises", sets: 3, reps: "15", rest: 60, startWeight: 8, increment: 2.5, frequency: 4, targetWeight: 23 },
              { name: "Wrist Curl", sets: 3, reps: "20", rest: 45, startWeight: 30, increment: 2.5, frequency: 4, targetWeight: 47.5 }
            ]
          },
          maison: {
            title: "Séance Maison (2x/semaine - Mardi & Jeudi soir)",
            exercises: [
              { name: "Hammer Curl", sets: 3, reps: "12", rest: 60, startWeight: 12, increment: 2.5, frequency: 3, targetWeight: 34.5 }
            ]
          }
        },

        init: function() {
          this.setupEventListeners();
          this.populateWeekSelect();
          this.updateDisplay();
        },

        setupEventListeners: function() {
          // Onglets header
          document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
              const tab = e.target.dataset.tab;
              this.switchTab(tab);
            });
          });

          // Nav inférieure
          document.querySelectorAll('.nav-item[data-nav]').forEach(item => {
            item.addEventListener('click', (e) => {
              const nav = e.currentTarget.dataset.nav;
              this.switchTab(nav);
            });
          });

          // Sélecteurs
          document.getElementById('weekSelect').addEventListener('change', () => this.updateDisplay());
          document.getElementById('daySelect').addEventListener('change', () => this.updateDisplay());

          // Timer controls
          document.getElementById('timerStart').addEventListener('click', () => this.startTimer());
          document.getElementById('timerPause').addEventListener('click', () => this.pauseTimer());
          document.querySelector('.timer-reset').addEventListener('click', () => this.resetTimer());

          // Workout controls
          document.querySelector('.control-complete').addEventListener('click', () => this.completeSet());
          document.querySelector('.control-skip').addEventListener('click', () => this.skipExercise());
        },

        populateWeekSelect: function() {
          const select = document.getElementById('weekSelect');
          for(let i = 1; i <= 26; i++) {
            const option = document.createElement('option');
            option.value = i;
            option.textContent = `Semaine ${i}`;
            select.appendChild(option);
          }
        },

        calculateWeight: function(exercise, week) {
          const { startWeight, increment, frequency } = exercise;
          const progressions = Math.floor(week / frequency);
          return Math.round((startWeight + (increment * progressions)) * 10) / 10;
        },

        switchTab: function(tabName) {
          // Cacher tous les contenus
          document.querySelectorAll('.tab-content').forEach(t => t.classList.add('hidden'));
          document.getElementById(`tab-${tabName}`).classList.remove('hidden');

          // Mettre à jour les boutons header
          document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.tab === tabName);
          });

          // Mettre à jour nav inférieure
          document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
          });
          const activeNavItem = document.querySelector(`.nav-item[data-nav="${tabName}"]`);
          if (activeNavItem) activeNavItem.classList.add('active');
        },

        updateDisplay: function() {
          const week = parseInt(document.getElementById('weekSelect').value) || 1;
          const day = document.getElementById('daySelect').value;
          this.currentWeek = week;
          this.currentDay = day;
          
          this.renderSessionStats();
          this.renderExercises();
        },

        renderSessionStats: function() {
          const workout = this.program[this.currentDay];
          if (!workout) return;

          const totalSets = workout.exercises.reduce((sum, ex) => sum + ex.sets, 0);
          const totalVolume = workout.exercises.reduce((sum, ex) => {
            const weight = this.calculateWeight(ex, this.currentWeek);
            const reps = typeof ex.reps === 'number' ? ex.reps : parseInt(ex.reps.split('-')[0]);
            return sum + (weight * reps * ex.sets);
          }, 0);
          const duration = Math.ceil(totalSets * 2.5);

          const html = `
            <div class="stat-box">
              <div class="stat-value">${totalSets}</div>
              <div class="stat-label">Séries totales</div>
            </div>
            <div class="stat-box">
              <div class="stat-value">${Math.round(totalVolume/1000)}t</div>
              <div class="stat-label">Volume total</div>
            </div>
            <div class="stat-box">
              <div class="stat-value">${duration}</div>
              <div class="stat-label">Minutes</div>
            </div>
            <div class="stat-box">
              <div class="stat-value">${workout.exercises.length}</div>
              <div class="stat-label">Exercices</div>
            </div>
          `;
          document.getElementById('sessionStats').innerHTML = html;
        },

        renderExercises: function() {
          const workout = this.program[this.currentDay];
          if (!workout) return;

          let html = '';
          workout.exercises.forEach(ex => {
            const weight = this.calculateWeight(ex, this.currentWeek);
            html += `
              <div class="exercise-card">
                <div class="exercise-header">${ex.name}</div>
                <div class="exercise-stats">
                  <span class="stat-chip">${ex.sets} séries</span>
                  <span class="stat-chip">${ex.reps} reps</span>
                  <span class="stat-chip weight">${weight}kg</span>
                  <span class="stat-chip">${ex.rest}s repos</span>
                </div>
              </div>
            `;
          });
          document.getElementById('exerciseList').innerHTML = html;
        },

        startWorkout: function() {
          document.getElementById('workoutMode').classList.remove('hidden');
          this.currentExerciseIndex = 0;
          this.currentSet = 1;
          this.resetTimer();
          this.updateWorkoutDisplay();
        },

        exitWorkout: function() {
          document.getElementById('workoutMode').classList.add('hidden');
          this.resetTimer();
        },

        updateWorkoutDisplay: function() {
          const workout = this.program[this.currentDay];
          if (!workout || this.currentExerciseIndex >= workout.exercises.length) {
            this.exitWorkout();
            return;
          }

          const exercise = workout.exercises[this.currentExerciseIndex];
          const weight = this.calculateWeight(exercise, this.currentWeek);

          document.getElementById('workoutExerciseName').textContent = exercise.name;
          document.getElementById('workoutSets').textContent = `${this.currentSet}/${exercise.sets}`;
          document.getElementById('workoutReps').textContent = exercise.reps;
          document.getElementById('workoutWeight').textContent = `${weight}kg`;
          document.getElementById('workoutRest').textContent = `${exercise.rest}s`;
        },

        completeSet: function() {
          const workout = this.program[this.currentDay];
          if (!workout) return;

          const exercise = workout.exercises[this.currentExerciseIndex];
          
          if (this.currentSet < exercise.sets) {
            this.currentSet++;
            this.resetTimer();
            this.startTimer();
          } else {
            this.currentExerciseIndex++;
            this.currentSet = 1;
            
            if (this.currentExerciseIndex >= workout.exercises.length) {
              alert('Félicitations! Vous avez terminé votre séance!');
              this.exitWorkout();
              return;
            }
            
            this.resetTimer();
          }
          
          this.updateWorkoutDisplay();
        },

        skipExercise: function() {
          this.currentExerciseIndex++;
          this.currentSet = 1;
          
          const workout = this.program[this.currentDay];
          if (this.currentExerciseIndex >= workout.exercises.length) {
            alert('Séance terminée!');
            this.exitWorkout();
            return;
          }
          
          this.resetTimer();
          this.updateWorkoutDisplay();
        },

        startTimer: function() {
          if (this.timerRunning) return;
          
          this.timerRunning = true;
          document.getElementById('timerStart').disabled = true;
          document.getElementById('timerPause').disabled = false;
          
          this.timer = setInterval(() => {
            this.timerSeconds++;
            this.updateTimerDisplay();
          }, 1000);
        },

        pauseTimer: function() {
          if (!this.timerRunning) return;
          
          this.timerRunning = false;
          document.getElementById('timerStart').disabled = false;
          document.getElementById('timerPause').disabled = true;
          
          clearInterval(this.timer);
        },

        resetTimer: function() {
          this.pauseTimer();
          this.timerSeconds = 0;
          this.updateTimerDisplay();
        },

        updateTimerDisplay: function() {
          const minutes = Math.floor(this.timerSeconds / 60);
          const seconds = this.timerSeconds % 60;
          document.getElementById('workoutTimer').textContent = 
            `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        },

        showHistory: function() {
          alert('Fonctionnalité Historique - En cours de développement');
        },

        showProgression: function() {
          this.switchTab('stats');
        },

        showIntensificationGuide: function() {
          alert('Guide des Techniques d\'Intensification - En cours de développement');
        },

        showSettings: function() {
          alert('Réglages - En cours de développement');
        }
      };

      // Initialisation
      window.app = app;
      app.init();

      console.log('🏆 HYBRID MASTER 51 - Application chargée avec succès');
    });
  </script>
</body>
</html>
